
<!-- This file was borrowed from Google's examples
It provides a pretty straightforward set of APIS to start media playing on the chromecast,
https://github.com/googlecast/CastHelloVideo-chrome

It is licensed under the Apache 2.0 license.
-->

<!--
  TODO
flow should go
new session: start playback asap
existing session: show what's playing & allow it to be interrupted
we'll only see existing sessions for our own paticular app - or someone else's
todo: properly mirror volume control via session information
	-->

<!DOCTYPE html>
<html data-cast-api-enabled="true">
<head>
<title>Play file to Chromecast</title>
<script type="text/javascript" src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"></script>
<!--<script type="text/javascript" src="/static/chromecast.js"></script>-->
<script>
function calculateProgress(value){
  //value is 0/100
  if(currentMediaSession){
    return convertSeconds2hms((value/100)*currentMediaSession.media.duration);
  } else {
    return value;
  }
}
</script>
<script type="text/javascript" src="/static/underscore.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
<script type="text/javascript" src="/static/app.js"></script>
<link rel="stylesheet" type="text/css" href="static/hdsg.css" media="all" />
</head>
<body ng-app="myApp" ng-controller="playController as play">

<h1>{{play.file.file_name}}</h1>
<p><a ng-href="/viewfolder?f={{play.file.file_dir}}">Back to directory</a></p>

<h2>Player Controls</h2>

<p>Direct URL to media: <a ng-href="{{play.file.file_url}}">{{play.file.file_url}}</a></p>

<script type="text/javascript">
  function setTranscodeDirectUrl(){
    /*document.getElementById("transcodeurl").innerHTML = getTranscodeUrl();
    document.getElementById("transcodeurl").href = getTranscodeUrl();*/
  }

  function getTranscodeUrl(){
    /*var transcode = document.location.origin + '{{= it.transcode_url.replace("'", "\\'") }}';
    transcode += "&audiotrack=" + document.getElementById("audiotrack").value;
    transcode += "&videotrack=" + document.getElementById("videotrack").value;
    transcode += "&subtitles=" + document.getElementById("subtitles").value;
    transcode += "&subtitletrack=" + document.getElementById("subtitletrack").value;
    return transcode;*/
    return "";
  }

	//var file = document.location.origin + '{{= it.file_url.replace("'", "\\'") }}';
	//selectMedia(file);
  setTranscodeDirectUrl();
</script>
</body>
</html>
